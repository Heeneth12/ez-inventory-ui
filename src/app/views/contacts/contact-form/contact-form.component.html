<div class="w-full h-screen flex flex-col bg-white overflow-hidden font-sans">

  <div class="flex items-center justify-between px-8 py-3 border-b border-gray-100 shrink-0 bg-white z-10">
    <div>
      <h1 class="text-2xl font-bold text-gray-900 tracking-tight">
        {{ isEditMode ? 'Edit Contact' : 'Create New Contact' }}
      </h1>
    </div>
    <div class="flex gap-4">
      <button type="button" (click)="onCancel()"
        class="px-6 py-2 text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-gray-200">
        Cancel
      </button>
      <button type="button" (click)="onSubmit()" [disabled]="contactForm.invalid || isLoading"
        class="px-8 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md shadow-sm transition-colors disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
        {{ isLoading ? 'Saving...' : 'Save Contact' }}
      </button>
    </div>
  </div>

  <form [formGroup]="contactForm" class="flex-1 flex flex-col px-8 py-6 gap-12 overflow-y-auto lg:overflow-x-hidden">

    <div class="grid grid-cols-1 lg:grid-cols-4 gap-x-8 gap-y-6">
      <div class="lg:col-span-4 pb-2 border-b border-gray-50">
        <h3 class="text-sm font-bold text-gray-900 uppercase tracking-wide">Basic Information</h3>
      </div>

      <div class="space-y-1">
        <label for="contactCode" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">
          Contact Code <span class="text-red-500">*</span>
        </label>
        <input type="text" formControlName="contactCode" id="contactCode"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm"
          [class.border-red-500]="contactForm.get('contactCode')?.touched && contactForm.get('contactCode')?.invalid">
        <p *ngIf="contactForm.get('contactCode')?.touched && contactForm.get('contactCode')?.invalid"
          class="text-red-500 text-xs">Required</p>
      </div>

      <div class="space-y-1 lg:col-span-2">
        <label for="name" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">
          Name <span class="text-red-500">*</span>
        </label>
        <input type="text" formControlName="name" id="name"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm"
          [class.border-red-500]="contactForm.get('name')?.touched && contactForm.get('name')?.invalid">
        <p *ngIf="contactForm.get('name')?.touched && contactForm.get('name')?.invalid" class="text-red-500 text-xs">
          Required</p>
      </div>

      <div class="flex items-end pb-2 justify-start">
        <label class="flex items-center gap-3 cursor-pointer group">
          <div class="relative">
            <input type="checkbox" formControlName="active" id="active" class="sr-only peer">
            <div
              class="w-11 h-6 bg-gray-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600">
            </div>
          </div>
          <span
            class="text-xs font-semibold text-gray-500 uppercase tracking-wider group-hover:text-blue-600 transition-colors">Is
            Active?</span>
        </label>
      </div>

      <div class="space-y-1 lg:col-span-2">
        <label for="email" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Email Address</label>
        <input type="email" formControlName="email" id="email"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
      </div>

      <div class="space-y-1">
        <label for="phone" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Phone</label>
        <input type="text" formControlName="phone" id="phone" placeholder="9876543210"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
      </div>

      <div class="space-y-1">
        <label for="type" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Contact Type</label>
        <select id="type" formControlName="type"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors sm:text-sm appearance-none cursor-pointer">
          <option *ngFor="let type of contactTypes" [value]="type">{{ type }}</option>
        </select>
      </div>

      <div class="space-y-1 lg:col-span-2">
        <label for="gstNumber" class="text-xs font-semibold text-gray-500 uppercase tracking-wider">GST Number</label>
        <input type="text" formControlName="gstNumber" id="gstNumber"
          class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
      </div>
    </div>

    <div formArrayName="addresses" class="space-y-8">

      <div *ngFor="let address of addressControls; let i = index" [formGroupName]="i" class="animate-fade-in">

        <div class="grid grid-cols-1 lg:grid-cols-4 gap-x-8 gap-y-6">

          <div class="lg:col-span-4 pb-2 border-b border-gray-50 flex justify-between items-center">
            <h3 class="text-sm font-bold text-gray-900 uppercase tracking-wide">
              Address Location #{{i + 1}}
            </h3>
            <button *ngIf="addressControls.length > 1" type="button" (click)="removeAddress(i)"
              class="text-xs font-semibold text-red-500 hover:text-red-700 uppercase tracking-wider transition-colors">
              Remove
            </button>
          </div>

          <div class="space-y-1">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Address Type</label>
            <select formControlName="type"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors sm:text-sm appearance-none cursor-pointer">
              <option *ngFor="let t of addressTypes" [value]="t">{{ t }}</option>
            </select>
          </div>

          <div class="space-y-1 lg:col-span-3">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Address Line 1</label>
            <input type="text" formControlName="addressLine1"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
            <p *ngIf="address.get('addressLine1')?.touched && address.get('addressLine1')?.invalid"
              class="text-red-500 text-xs">Required</p>
          </div>

          <div class="space-y-1 lg:col-span-2">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Address Line 2</label>
            <input type="text" formControlName="addressLine2"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
          </div>

          <div class="space-y-1">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">City</label>
            <input type="text" formControlName="city"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
          </div>

          <div class="space-y-1">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">State</label>
            <input type="text" formControlName="state"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
          </div>

          <div class="space-y-1">
            <label class="text-xs font-semibold text-gray-500 uppercase tracking-wider">Pincode</label>
            <input type="text" formControlName="pinCode"
              class="w-full border-b border-gray-300 py-2 text-gray-900 focus:border-blue-500 focus:outline-none bg-transparent transition-colors placeholder-gray-300 sm:text-sm">
          </div>

        </div>
      </div>

      <div class="pt-4 pb-12">
        <button type="button" (click)="addAddress()"
          class="flex items-center gap-2 text-sm font-bold text-blue-600 hover:text-blue-800 transition-colors uppercase tracking-wide">
          <span class="text-lg">+</span> Add Another Location
        </button>
      </div>
    </div>
  </form>
</div>