<div class="relative w-full font-sans">

    <label *ngIf="config.label" class="block text-sm font-medium text-gray-700 mb-1 ml-1">
        {{ config.label }}
    </label>

    <div (click)="toggleCalendar()"
        class="flex items-center justify-between w-full px-4 py-2 bg-white border border-gray-300 rounded-full  cursor-pointer hover:border-blue-500 focus:ring-2 focus:ring-blue-500 transition-all duration-200"
        [class.border-blue-500]="isOpen" [class.ring-2]="isOpen" [class.ring-blue-100]="isOpen">
        <div class="flex items-center text-gray-700">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 mr-3 text-gray-400" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
            </svg>

            <span *ngIf="formattedDisplay; else placeholder" class="font-medium text-sm text-gray-900">
                {{ formattedDisplay }}
            </span>
            <ng-template #placeholder>
                <span class="text-gray-400">{{ config.placeholder || 'Select Date' }}</span>
            </ng-template>
        </div>

        <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 text-gray-400 transition-transform duration-200"
            [class.rotate-180]="isOpen" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
        </svg>
    </div>

    <div *ngIf="isOpen"
        class="absolute z-50 mt-2 bg-white rounded-xl shadow-2xl border border-gray-100 p-4 w-80 animate-fade-in-down">

        <div class="flex items-center justify-between mb-4">
            <button (click)="changeMonth(-1)" class="p-1 hover:bg-gray-100 rounded-full transition-colors">
                <svg class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
                </svg>
            </button>

            <div class="font-bold text-gray-800 text-lg">
                {{ currentViewDate | date:'MMMM yyyy' }}
            </div>

            <button (click)="changeMonth(1)" class="p-1 hover:bg-gray-100 rounded-full transition-colors">
                <svg class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
            </button>
        </div>

        <div class="grid grid-cols-7 mb-2">
            <div *ngFor="let day of weekDays"
                class="text-xs font-semibold text-center text-gray-400 uppercase tracking-wider">
                {{ day }}
            </div>
        </div>

        <div class="grid grid-cols-7 gap-y-1">
            <div *ngFor="let date of daysInMonth" class="flex justify-center">
                <div (click)="selectDate(date)" [ngClass]="getDayClasses(date)">
                    {{ date.getDate() }}
                </div>
            </div>
        </div>

        <div *ngIf="config.type === 'both' && selectedFrom && !selectedTo"
            class="mt-3 text-center text-xs text-blue-600 font-medium bg-blue-50 py-1 rounded">
            Select End Date
        </div>
    </div>
</div>